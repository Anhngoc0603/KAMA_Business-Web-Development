/* === CÀI ĐẶT CHUNG & FONT === */
body {
  font-family: 'Playfair Display', serif;
  background-color: #FFF9F9;
  color: #6B4C3B;
  margin: 0;
  transition: all 0.3s ease;
  overflow-x: hidden;
  overflow-y: scroll; /* Luôn hiển thị scrollbar để tránh nhảy layout */
}

main {
    /* Khoảng cách từ top = chiều cao header + navbar + khoảng trống nhỏ */
    /* Điều chỉnh giá trị này nếu chiều cao header/navbar của bạn khác */
    padding-top: calc(30px + 60px + 49px + 20px); /* announcement + header + navbar + gap */
}

/* Fireworks Animation (Giữ nguyên) */
.fireworks-container {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  pointer-events: none; z-index: -1; /* Đưa xuống dưới cùng */ overflow: hidden;
}
.firework-particle {
  position: absolute; width: 80px; height: 80px; border-radius: 50%; /* Giảm size */
  opacity: 0; will-change: transform, opacity;
  animation: firework-burst 2.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  left: 50%; top: 50%; transform: translate(-50%, -50%) scale(0);
  box-shadow: 0 0 15px rgba(230, 166, 176, 0.7), 0 0 25px rgba(249, 198, 207, 0.4); /* Giảm shadow */
  border: 1px solid #E6A6B0; /* Mảnh hơn */
}
.firework-particle.pink-1 { background: linear-gradient(45deg, #E6A6B0, #F9C6CF); }
.firework-particle.pink-2 { background: linear-gradient(45deg, #F9C6CF, #FFF9F9); }
.firework-particle.pink-3 { background: linear-gradient(45deg, #FADADD, #E6A6B0); }
.firework-particle.pink-4 { background: linear-gradient(45deg, #FFF9F9, #FADADD); }
.firework-particle::after {
  content: ''; position: absolute; top: 50%; left: 50%;
  width: 10px; height: 10px; background: #F9C6CF; border-radius: 50%; /* Nhỏ hơn */
  transform: translate(-50%, -50%) scale(0); animation: sparkle 1.2s ease-in-out infinite;
}
@keyframes sparkle {
  0%, 100% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
  50% { transform: translate(-50%, -50%) scale(1); opacity: 0.9; }
}
@keyframes firework-burst {
  0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); opacity: 0; }
  10% { opacity: 1; } 50% { opacity: 0.8; }
  100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0.5) rotate(45deg); opacity: 0; }
}
.firework-particle:nth-child(n) { animation-delay: calc(var(--i) * 0.05s); } /* Tăng delay */


/* === CÁC SECTION TRONG MAIN === */
.category-showcase-section,
.products-page-container,
.brand-showcase-section {
    padding: 40px 20px;
    box-sizing: border-box;
}

/* Tiêu đề Section */
.category-showcase-section h2,
.products-grid-container h2,
.brand-showcase-section h2 {
  font-size: 32px;
  font-weight: 700;
  color: #6B4C3B;
  margin-bottom: 30px;
  text-align: center;
}

/* === MỤC 1: ALL PRODUCTS (Sidebar + Grid) === */
.products-page-container {
  width: 95%; /* Chiếm gần hết chiều rộng */
  max-width: 1600px; /* Giới hạn chiều rộng tối đa */
  margin: 40px auto; /* Căn giữa và tạo khoảng cách */
  display: flex; /* !! Quan trọng: Bật Flexbox !! */
  gap: 30px; /* Khoảng cách giữa sidebar và grid */
  align-items: flex-start; /* Căn các cột theo đỉnh */
}

.products-filter-sidebar {
  flex: 0 0 260px; /* !! Quan trọng: Sidebar rộng 260px, không co giãn !! */
  position: sticky; /* Dính lại khi cuộn */
  top: 150px; /* Vị trí dính (điều chỉnh theo chiều cao header) */
  height: calc(100vh - 170px); /* Chiều cao tối đa, cho phép scroll nội bộ */
  overflow-y: auto; /* Cho phép scroll sidebar nếu nội dung dài */
  padding-right: 15px; /* Khoảng trống cho scrollbar */
}
/* Scrollbar cho sidebar (Tùy chọn) */
.products-filter-sidebar::-webkit-scrollbar { width: 5px; }
.products-filter-sidebar::-webkit-scrollbar-thumb { background-color: rgba(230, 166, 176, 0.4); border-radius: 3px; }
.products-filter-sidebar::-webkit-scrollbar-track { background-color: transparent; }

.products-filter-sidebar .filter-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #FADADD; padding-bottom: 10px; margin-bottom: 25px; } /* Tăng margin */
.products-filter-sidebar .filter-header h3 { font-size: 20px; color: #6B4C3B; margin: 0; text-transform: uppercase; } /* Uppercase */
.products-filter-sidebar .filter-header a { font-size: 13px; /* Nhỏ hơn */ color: #aaa; text-decoration: none; transition: color 0.3s ease; }
.products-filter-sidebar .filter-header a:hover { color: #E6A6B0; }
.products-filter-sidebar .filter-group { margin-bottom: 30px; } /* Tăng margin */
.products-filter-sidebar .filter-group h4 { font-size: 16px; font-weight: 600; margin-bottom: 18px; /* Tăng margin */ border-bottom: 1px solid #eee; padding-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
.products-filter-sidebar .filter-tags { display: flex; flex-wrap: wrap; gap: 10px; } /* Tăng gap */
.products-filter-sidebar .filter-tags .tag { padding: 6px 14px; /* Tăng padding */ background: #fff; border: 1px solid #eee; /* Nhạt hơn */ border-radius: 20px; /* Bo tròn hơn */ font-size: 13px; cursor: pointer; transition: all 0.3s ease; color: #888; }
.products-filter-sidebar .filter-tags .tag:hover { background: #fdf5f5; border-color: #FADADD; color: #E6A6B0; }
.products-filter-sidebar .filter-tags .tag.active { background: #E6A6B0; color: white; border-color: #E6A6B0; }

.products-grid-container {
  flex: 1; /* !! Quan trọng: Grid chiếm hết phần còn lại !! */
}
.products-grid-container h2 { /* Tiêu đề "All Products" */ text-align: left; /* Căn trái */ margin-bottom: 10px; }
.products-grid-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
.products-grid-header p { font-size: 14px; color: #8c7b7b; margin: 0; }
.products-grid-header .sort-by select { padding: 8px 12px; border: 1px solid #eee; border-radius: 8px; /* Ít bo hơn */ background: white; color: #6B4C3B; font-size: 14px; cursor: pointer; outline: none; font-family: 'Playfair Display', serif; }

.products-grid { /* Lưới sản phẩm bên trong container */
  display: grid;
  /* Quan trọng: Số cột tự động điều chỉnh */
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); /* Min 240px, tự chia cột */
  gap: 30px; /* Khoảng cách giữa các sản phẩm */
  width: 100%;
  margin: 0;
  padding: 0;
}

/* --- Product Card (Style chung) --- */
.product-card {
  background: #fff; /* Nền trắng rõ ràng */
  border-radius: 15px; /* Bo góc ít hơn */
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06); /* Shadow nhẹ nhàng */
  overflow: hidden;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex; /* Cho phép flex direction column */
  flex-direction: column; /* Các phần tử xếp dọc */
}
.product-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); }
.product-image-container { /* Thêm container cho ảnh để xử lý hover */
    position: relative;
    overflow: hidden; /* Đảm bảo ảnh hover không tràn ra */
}
.product-img { width: 100%; height: auto; /* Chiều cao tự động */ aspect-ratio: 1 / 1; /* Giữ tỷ lệ vuông */ object-fit: cover; display: block; /* Bỏ khoảng trắng dưới ảnh */ transition: opacity 0.4s ease; }
.product-img.hover-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.4s ease; z-index: 1; pointer-events: none; /* Không bắt sự kiện chuột */}
.product-card:hover .product-img { opacity: 0; } /* Ẩn ảnh chính khi hover */
.product-card:hover .hover-image { opacity: 1; } /* Hiện ảnh hover */

.info { padding: 15px; flex-grow: 1; /* Cho phép phần info co giãn */ display: flex; flex-direction: column; } /* Flex để đẩy button xuống dưới */
.info h3 { font-size: 17px; /* Nhỏ hơn */ margin: 0 0 5px 0; color: #5c3d2e; /* Đậm hơn */ white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.info p { font-size: 13px; color: #aaa; margin: 0 0 8px 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.meta { font-size: 11px; margin: 0 0 10px 0; color: #ccc; }
.actions { display: flex; justify-content: space-between; align-items: center; margin-top: auto; /* Đẩy xuống dưới cùng */ padding-top: 10px; border-top: 1px solid #f5f5f5; /* Thêm đường kẻ nhẹ */ }
.price { color: #E6A6B0; font-weight: bold; font-size: 18px; }
.rating { display: flex; align-items: center; font-size: 13px; color: #aaa; }
.star { width: 14px; height: 14px; color: gold; margin-right: 3px; }
.buttons { display: flex; align-items: center; /* Chỉ cần align-items */ gap: 8px; margin-top: 12px; }
.quantity-input { width: 50px; padding: 6px; border: 1px solid #eee; border-radius: 6px; font-family: inherit; font-size: 14px; color: #6B4C3B; text-align: center; transition: border-color 0.3s ease; box-sizing: border-box; }
.quantity-input:focus { border-color: #E6A6B0; outline: none; }
.btn-primary { border: none; background: #E6A6B0; color: white; border-radius: 6px; padding: 8px 14px; cursor: pointer; font-family: inherit; font-size: 13px; transition: background-color 0.3s ease, transform 0.3s ease; flex-grow: 1; /* Nút chiếm phần còn lại */ text-align: center; }
.btn-primary:hover { background-color: #F9C6CF; transform: translateY(-2px); }
.btn-outline { border: none; background: url('images/shopping.png') no-repeat center center; /* Kiểm tra lại đường dẫn */ background-size: 22px 22px; width: 36px; height: 36px; cursor: pointer; transition: opacity 0.3s ease, transform 0.3s ease; border-radius: 6px; border: 1px solid #eee; /* Thêm border nhẹ */ }
.btn-outline:hover { opacity: 0.7; background-color: #fdf5f5; border-color: #FADADD; transform: scale(1.05); }

/* --- Load More Button --- */
.load-more { text-align: center; margin: 40px 0; }
.load-more .btn-primary { font-size: 15px; padding: 12px 35px; flex-grow: 0; /* Bỏ flex-grow */ border-radius: 25px; /* Bo tròn hơn */ }

/* === MỤC 2 & 3: SHOP BY CATEGORY / BRAND (Ảnh Cards) === */
.category-showcase-section,
.brand-showcase-section {
    padding: 40px 20px;
}
.category-showcase-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Tăng minmax */
  gap: 30px;
  max-width: 1400px;
  margin: 0 auto;
}
.category-showcase-card {
  position: relative; overflow: hidden; border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer; text-decoration: none; display: block;
}
.category-showcase-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12); }
.category-showcase-card img { width: 100%; height: auto; /* Chiều cao tự động */ aspect-ratio: 3 / 4; /* Tỷ lệ ảnh đứng */ object-fit: cover; display: block; transition: transform 0.4s ease; }
.category-showcase-card:hover img { transform: scale(1.05); }
.category-showcase-title {
  position: absolute; bottom: 0; left: 0; width: 100%; padding: 25px; /* Tăng padding */
  background: linear-gradient(to top, rgba(0, 0, 0, 0.8), rgba(0,0,0,0.5), transparent);
  color: white; font-size: 24px; /* Lớn hơn */ font-weight: 600; text-align: left;
  box-sizing: border-box; text-shadow: 0 1px 3px rgba(0,0,0,0.6);
}



/* === MEDIA QUERIES === */
@media (max-width: 900px) {
  main { padding-top: calc(30px + 60px + 49px + 10px); } /* Giảm padding top */
  .header { padding: 10px 15px; }
  .menu-toggler { display: block !important; width: 28px; height: 28px; z-index: 1011; position: relative; }
  header nav { gap: 10px; }
  header nav a img { width: 26px; height: 26px; }
  .search { margin-left: 8px; margin-right: 8px; max-width: 150px; }
  .search .icon { width: 16px; height: 16px; left: 10px; }
  .search input { padding: 6px 10px 6px 32px; }

  /* --- Navbar Mobile --- */
  .navbar {
    display: none; flex-direction: column; align-items: flex-start;
    background-color: #FFF9F9; padding: 60px 20px 20px 20px; gap: 5px; /* Giảm gap */
    position: fixed; top: 0; left: -100%; /* Bắt đầu ẩn hẳn bên trái */ width: 85%; /* Không full width */ height: 100vh;
    box-shadow: 5px 0 15px rgba(0,0,0,0.1); z-index: 1010; overflow-y: auto;
    transition: left 0.4s ease; /* Đổi transition thành left */
    border-top: none; /* Bỏ border top */
  }
  .navbar.active { left: 0; /* Trượt vào */ }
  .navbar a { /* Link NEW, COLLECTIONS,... */ font-size: 17px; padding: 12px 10px; /* Tăng padding */ width: 100%; border-bottom: 1px solid #f0e8e8; box-sizing: border-box; display: block; } /* Cần display block */
  .navbar a:hover { background-color: #fdf5f5; border-bottom-color: #f0e8e8; } /* Giữ border khi hover */
  .shop-all { /* Link CATEGORIES */ width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 12px 10px; font-size: 17px; border-bottom: 1px solid #f0e8e8; box-sizing: border-box; }
  .shop-all::after { content: "›"; /* Đổi thành mũi tên sang */ font-size: 20px; transition: transform 0.3s ease; }
  .shop-all.active::after { transform: rotate(90deg); } /* Quay xuống */

   /* --- Menu Categories Mobile --- */
  .menu-categories {
    position: absolute; /* Đổi thành absolute */ top: 0; left: 0; width: 100%; height: 100%; /* Full screen */
    background: #FFF9F9; /* Nền giống navbar */ padding: 60px 20px 20px 20px; display: none; /* Ẩn ban đầu */
    flex-direction: column; gap: 10px; z-index: 1011; /* Cao hơn navbar */ overflow-y: auto;
    /* Bỏ các style cũ không cần thiết */ border: none; border-radius: 0; margin: 0; box-shadow: none;
  }
  .menu-categories.active { display: flex !important; animation: slideInRight 0.4s ease; } /* Hiệu ứng trượt vào */
  @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
  .back-btn { display: none; /* JS sẽ bật */ margin-bottom: 15px; padding: 10px 15px; font-size: 15px; }
  .categories-wrapper { display: flex; flex-direction: column; gap: 5px; width: 100%; } /* Giảm gap */
  .category { padding: 0; background: none; border: none; border-radius: 0; } /* Reset style category */
  .category-header { padding: 12px 10px; border-bottom: 1px solid #f0e8e8; cursor: pointer; }
  .category:hover { background: #fdf5f5; transform: none; } /* Bỏ hover translateX */
  .category h3 { font-size: 16px; border-bottom: none; margin: 0; color: #6B4C3B; } /* Màu chữ thường */
  .next-btn { display: flex; padding: 6px; }
  .next-btn img { width: 16px; height: 16px; }
  .product-list { /* Danh sách con */ display: none; max-height: none; /* Bỏ max-height */ background-color: #fdf5f5; /* Nền nhạt */ border: none; padding: 10px 10px 10px 25px; /* Tăng thụt lề trái */ width: 100%; overflow-y: visible; /* Không cần scroll riêng */ margin-top: 0; box-sizing: border-box; border-bottom: 1px solid #f0e8e8; }
  .category.active > .product-list { display: block !important; } /* Chỉ hiện khi category active */
  .category.active > .category-header { background-color: #fceeee; } /* Highlight header khi active */
  .category.active .next-btn { transform: rotate(90deg); }
  .product-list li { padding: 0; border-bottom: none; } /* Bỏ border */
  .product-list li a { font-size: 14px; padding: 8px 5px; color: #888; } /* Nhạt hơn */
  .product-list li:hover a { color: #E6A6B0; padding-left: 10px; background: none; } /* Hover khác */

 /* --- Các mục trong Body Mobile --- */
  .products-page-container { flex-direction: column; margin-top: 20px; gap: 20px; }
  .products-filter-sidebar { position: static; height: auto; overflow-y: visible; margin-bottom: 30px; padding-right: 0; flex-basis: auto; } /* Reset sidebar */
  .products-grid-container h2 { text-align: center; } /* Căn giữa lại */
  .products-grid-container .products-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; } /* Luôn 2 cột */
  .product-card { border-radius: 10px; }
  .product-image-container { /* Thêm container ảnh */ position: relative; overflow: hidden; }
  .product-img, .product-img.hover-image { height: auto; aspect-ratio: 1/1; } /* Ảnh vuông */
  .info { padding: 10px; }
  .info h3 { font-size: 15px; margin-bottom: 4px;}
  .info p { font-size: 12px; margin-bottom: 6px;}
  .meta { font-size: 10px; margin-bottom: 8px;}
  .actions { margin-top: 8px; padding-top: 8px;}
  .price { font-size: 15px;}
  .rating { font-size: 12px;} .star { width: 12px; height: 12px;}
  .buttons { margin-top: 10px; gap: 6px;}
  .quantity-input { width: 40px; padding: 5px; font-size: 12px;}
  .btn-primary { padding: 7px 10px; font-size: 12px;}
  .btn-outline { width: 32px; height: 32px; background-size: 20px 20px;}

  .category-showcase-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; } /* 2 cột */
  .category-showcase-card img { height: auto; aspect-ratio: 3/4; }
  .category-showcase-title { font-size: 18px; padding: 15px; }

  .brand-showcase-section .category-showcase-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; }
  .brand-showcase-section .category-showcase-card img { height: auto; aspect-ratio: 3/4; }
  .brand-showcase-section .category-showcase-title { font-size: 18px; padding: 15px; }

 /* --- Popups Mobile --- */
 .added-cart-wrapper { max-width: 280px; } .added-cart-title { font-size: 18px; } .added-cart-product { font-size: 15px; }
 .product-list-wrapper { max-width: 90%; padding: 20px;}
 .product-list-items { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;}
 .product-list-item img { height: 90px; } .product-list-item h4 { font-size: 13px; } .product-list-item .price { font-size: 12px; }
 .product-list-close { font-size: 24px; top: 8px; right: 8px;}

  /* --- Font sizes & Misc Mobile --- */
  .footer-section h3 { font-size: 18px; }
  .footer-section ul a { font-size: 13px; }
  .footer-bottom { font-size: 11px; }
}

/* Smaller Mobile */
@media (max-width: 480px) {
   main { padding-top: calc(30px + 50px + 45px + 10px); } /* Điều chỉnh lại padding */
   .header { padding: 8px 10px; height: 50px; /* Thêm height cố định */}
   header nav { gap: 8px; } header nav a img { width: 22px; height: 22px; } /* Icon nhỏ hơn */
   .search { max-width: 100px; margin-left: 5px; margin-right: 5px;}
   .search .icon { width: 14px; height: 14px; left: 8px;}
   .search input { padding: 5px 8px 5px 28px; font-size: 12px;} /* Input nhỏ hơn */
   .logo { width: 120px; } /* Logo nhỏ hơn */
   .menu-toggler { width: 22px; height: 22px; }
   .navbar { padding: 50px 15px 15px 15px; width: 80%; } /* Thu nhỏ menu */
   .navbar a, .shop-all { font-size: 15px; padding: 10px 8px;} /* Link nhỏ hơn */
   .menu-categories { padding: 50px 15px 15px 15px; }
   .category-header { padding: 10px 8px; }
   .category h3 { font-size: 15px; } .next-btn img { width: 14px; height: 14px;}
   .product-list { padding: 8px 8px 8px 20px; } .product-list li a { font-size: 13px; padding: 6px 4px;}

   .products-page-container { gap: 15px; width: 100%; padding: 20px 10px; /* Giảm padding */} /* Sát lề hơn */
   .products-grid-container h2, .category-showcase-section h2, .brand-showcase-section h2 { font-size: 24px; margin-bottom: 15px; }
   .products-filter-sidebar .filter-group h4 { font-size: 15px; margin-bottom: 12px;}
   .products-filter-sidebar .filter-tags .tag { padding: 4px 10px; font-size: 12px;}
   .products-grid-header { margin-bottom: 15px; padding-bottom: 10px; flex-direction: column; align-items: flex-start; gap: 8px;} /* Header grid thành cột */
   .products-grid-header p { font-size: 13px;}
   .products-grid-header .sort-by select { font-size: 13px; padding: 6px 10px;}
   .products-grid-container .products-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; } /* Vẫn 2 cột */
   .product-card { border-radius: 8px;}
   .product-img, .product-img.hover-image { /* Ảnh vuông */ }
   .info { padding: 8px;}
   .info h3 { font-size: 13px; margin-bottom: 3px;}
   .info p { font-size: 11px; margin-bottom: 5px;}
   .meta { font-size: 9px; margin-bottom: 6px;}
   .actions { margin-top: 6px; padding-top: 6px;}
   .price { font-size: 14px;}
   .rating { font-size: 10px;} .star { width: 10px; height: 10px;}
   .buttons { margin-top: 8px; flex-direction: row; /* Giữ lại row */ justify-content: space-between; gap: 5px; } /* Space between */
   .quantity-input { width: 40px; font-size: 11px; padding: 4px;} /* Input số lượng nhỏ lại */
   .btn-primary { padding: 6px 8px; font-size: 11px; flex-grow: 1; } /* Nút add to cart */
   .btn-outline { width: 30px; height: 30px; background-size: 16px 16px; flex-shrink: 0;} /* Nút icon giỏ hàng */


   .category-showcase-grid { grid-template-columns: repeat(2, 1fr); gap: 10px;} /* Vẫn 2 cột */
   .category-showcase-card img { aspect-ratio: 3/4; }
   .category-showcase-title { font-size: 15px; padding: 10px; }

   .brand-showcase-section .category-showcase-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
   .brand-showcase-section .category-showcase-card img { aspect-ratio: 3/4; }
   .brand-showcase-section .category-showcase-title { font-size: 15px; padding: 10px; }

   .newsletter-form input { width: calc(100% - 55px); padding: 8px 15px; font-size: 13px; }
   .newsletter-form button { padding: 8px 15px; }
   .footer-main { padding: 0 5%; gap: 20px;}
   .footer-section { min-width: 100%; text-align: center;} /* Footer thành 1 cột */
   .footer-section ul { text-align: center;}
   .footer-social .social-icons { justify-content: center; gap: 15px;}
   .footer-social button { font-size: 20px;}
}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dior Forever Foundation - Flower Knows</title>
  <link rel="stylesheet" href="view_new.css" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    /* CSS t·∫°m th·ªùi cho header v√† footer */
    .temp-header, .temp-footer {
      padding: 20px;
      text-align: center;
      background-color: #f8f8f8;
      border-bottom: 1px solid #eee;
    }
    .temp-footer {
      border-top: 1px solid #eee;
      border-bottom: none;
      margin-top: 40px;
    }
    
    /* Loading indicator */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-left-color: #7986cb;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Placeholder for header -->
  <div id="header-placeholder">
    <div class="loading">
      <div class="spinner"></div>
      <span>Loading header...</span>
    </div>
  </div>

  <!-- Fireworks Animation -->
  <div class="fireworks-container"></div>
  
  <!-- Floating Elements -->
  <div class="floating-elements">
    <div class="floating-element">üå∏</div>
    <div class="floating-element">‚ú®</div>
    <div class="floating-element">üíñ</div>
  </div>

  <!-- Product Page Content -->
  <main class="product-page">
    <div class="product-gallery">
      <div class="gallery-main">
        <img src="../images/dior_foundation/figure-1655132157621.png" alt="Dior Forever Foundation" id="main-image">
      </div>
      <div class="gallery-thumbnails">
        <img src="../images/dior_foundation/bang-mau-Diorskin-Forever.png" alt="Image 1" class="thumbnail active">
        <img src="../images/dior_foundation/figure-1655132157621.png" alt="Image 2" class="thumbnail">
        <img src="../images/dior_foundation/kem-nen-diorskin-forever-undercover-foundation.png" alt="Image 3" class="thumbnail">
        <img src="../images/dior_foundation/M128_FOREVER_S1_25_M13G_Jisoo_Glow_SW_2400x3000.png" alt="Image 4" class="thumbnail">
        <img src="../images/dior_foundation/3348901578240_7.webp" alt="Image 5" class="thumbnail">
      </div>
    </div>

    <div class="product-details">
      <h1 class="product-title">Dior Forever Foundation</h1>
      <p class="new-arrival">New Arrival - Launched: October 18, 2025, 08:58 AM +07</p>

      <div class="product-pricing">
        <span class="original-price">$75.00</span>
        <span class="sale-price">$68.00</span>
      </div>

      <p class="shipping-note">Shipping calculated at checkout.</p>

      <div class="product-options">
        <label for="product-variant">Shade</label>
        <select id="product-variant">
          <option value="0W">0W Warm</option>
          <option value="1N">1N Neutral</option>
          <option value="1CR">1CR Cool Rosy</option>
          <option value="2N" selected>2N Neutral</option>
          <option value="3N">3N Neutral</option>
        </select>
      </div>

      <p class="product-description">
        Discover the latest addition to Dior's iconic lineup with the Dior Forever Foundation, newly arrived on October 18, 2025. This long-wear, high-perfection foundation enhances your natural glow with a flawless finish that lasts up to 24 hours. Crafted with a luxurious blend of Water, Glycerin, Dimethicone, Titanium Dioxide, and Iron Oxides, it provides medium to full coverage while keeping skin hydrated and smooth. Available in the elegant 2N shade, a versatile neutral tone, this 30ml product is perfect for all-day wear.
      </p>

      <div class="quantity-selector">
        <button class="quantity-btn" id="decrease-qty">-</button>
        <input type="number" id="quantity" value="1" min="1">
        <button class="quantity-btn" id="increase-qty">+</button>
      </div>

      <button class="btn-primary" id="addToCartBtn">ADD TO CART</button>
    </div>
  </main>

  <!-- Extended Product Information -->
  <section class="product-info-section">
    <h2>Ingredients & Texture</h2>
    <p>
      Dior Forever Foundation is formulated with an 86% skincare base infused with floral extracts, offering breathable comfort and long-lasting wear. Key ingredients include:
    </p>
    <ul>
      <li><strong>Iris Extract:</strong> Helps protect and soothe the skin.</li>
      <li><strong>Wild Pansy Extract:</strong> Maintains hydration and softness.</li>
      <li><strong>Rose Extract:</strong> Provides antioxidant benefits and a luxurious feel.</li>
      <li><strong>Nasturtium Extract:</strong> Promotes radiance and oxygenation.</li>
      <li><strong>Titanium Dioxide:</strong> Offers natural sun protection against UVA/UVB rays.</li>
    </ul>
    <p>
      The texture is velvety and fluid, delivering a natural matte finish that resists heat, humidity, and sweat. It smooths pores, evens skin tone, and controls shine for up to 24 hours.
    </p>
  </section>

  <section class="shade-info-section">
    <h2>Shade Range & Undertones</h2>
    <p>
      Dior Forever Foundation is available in a wide range of shades to suit all skin tones. The 6 iconic undertones include:
    </p>
    <ul>
      <li><strong>Neutral (N):</strong> Balanced pink and yellow tones.</li>
      <li><strong>Warm (W):</strong> Golden tones that reduce redness and tan easily.</li>
      <li><strong>Cool (C):</strong> Rosy tones for fair skin that rarely tans.</li>
      <li><strong>Cool Rosy (CR), Warm Olive, Warm Peach:</strong> Available in extended ranges.</li>
    </ul>
    <p>
      Popular shades include 0W Warm, 1N Neutral, 1CR Cool Rosy, 2N Neutral, and 3N Neutral. The 2N shade featured here is a versatile neutral tone ideal for medium skin with balanced undertones.
    </p>
  </section>

  <section class="product-benefits-section">
    <h2>Benefits</h2>
    <ul>
      <li><strong>Long-Lasting Perfection:</strong> Provides up to 24-hour wear with a flawless, matte finish that withstands challenging conditions.</li>
      <li><strong>Hydration & Comfort:</strong> Infused with 86% skincare ingredients to keep skin hydrated and comfortable throughout the day.</li>
      <li><strong>Flawless Coverage:</strong> Offers medium to full coverage, effectively concealing imperfections while maintaining a natural look.</li>
      <li><strong>Oil Control:</strong> Minimizes shine and controls excess oil, ideal for oily or combination skin types.</li>
      <li><strong>Skin Protection:</strong> Contains Titanium Dioxide for natural SPF benefits, shielding skin from harmful UVA/UVB rays.</li>
      <li><strong>Versatile Application:</strong> Suitable for all skin types, from dry to oily, with a lightweight feel that layers beautifully with other products.</li>
    </ul>
  </section>

  <!-- Placeholder for footer -->
  <div id="footer-placeholder">
    <div class="loading">
      <div class="spinner"></div>
      <span>Loading footer...</span>
    </div>
  </div>

  <script>
    // Script ƒë·ªÉ fetch header v√† footer
    document.addEventListener('DOMContentLoaded', async () => {
      // Fetch and load header
      try {
        const headerResponse = await fetch('../../header_footer/header.html');
        if (!headerResponse.ok) {
          throw new Error(`HTTP error! status: ${headerResponse.status}`);
        }
        const headerHTML = await headerResponse.text();
        document.getElementById('header-placeholder').innerHTML = headerHTML;
        console.log('Header loaded successfully');
      } catch (error) {
        console.error('Failed to load header:', error);
        document.getElementById('header-placeholder').innerHTML = `
          <div class="temp-header">
            <h1>Flower Knows</h1>
            <p>Temporary Header - Could not load actual header</p>
          </div>
        `;
      }

      // Fetch and load footer
      try {
        const footerResponse = await fetch('../../header_footer/footer.html');
        if (!footerResponse.ok) {
          throw new Error(`HTTP error! status: ${footerResponse.status}`);
        }
        const footerHTML = await footerResponse.text();
        document.getElementById('footer-placeholder').innerHTML = footerHTML;
        console.log('Footer loaded successfully');
      } catch (error) {
        console.error('Failed to load footer:', error);
        document.getElementById('footer-placeholder').innerHTML = `
          <div class="temp-footer">
            <p>&copy; 2025 Kama. All rights reserved.</p>
            <p>Temporary Footer - Could not load actual footer</p>
          </div>
        `;
      }

      // Kh·ªüi t·∫°o c√°c ch·ª©c nƒÉng JavaScript sau khi header v√† footer ƒë√£ ƒë∆∞·ª£c t·∫£i
      initializeProductPage();
    });

    // H√†m kh·ªüi t·∫°o c√°c ch·ª©c nƒÉng cho trang s·∫£n ph·∫©m
    function initializeProductPage() {
      console.log('üöÄ Product page initialized');
      
      // ==================== FIREWORKS ANIMATION ====================
      const fireworksContainer = document.querySelector('.fireworks-container');
      if (fireworksContainer) {
          const colors = ['pink-1', 'pink-2', 'pink-3', 'pink-4'];
          for (let i = 0; i < 120; i++) {
              const particle = document.createElement('div');
              particle.classList.add('firework-particle', colors[Math.floor(Math.random() * colors.length)]);
              particle.style.setProperty('--tx', `${Math.random() * 200 - 100}vw`);
              particle.style.setProperty('--ty', `${Math.random() * 200 - 100}vh`);
              particle.style.setProperty('--i', i);
              fireworksContainer.appendChild(particle);
              particle.addEventListener('animationend', () => {
                  particle.remove();
              });
          }
      }

      // ==================== PRODUCT GALLERY ====================
      const thumbnails = document.querySelectorAll('.thumbnail');
      const mainImage = document.getElementById('main-image');
      
      if (thumbnails && mainImage) {
          thumbnails.forEach(thumb => {
              thumb.addEventListener('click', function() {
                  changeMainImage(this.src, this);
              });
          });
      }

      // ==================== QUANTITY SELECTOR ====================
      const decreaseBtn = document.getElementById('decrease-qty');
      const increaseBtn = document.getElementById('increase-qty');
      const quantityInput = document.getElementById('quantity');
      
      if (decreaseBtn && increaseBtn && quantityInput) {
          decreaseBtn.addEventListener('click', function() {
              let value = parseInt(quantityInput.value);
              if (value > 1) {
                  quantityInput.value = value - 1;
                  quantityInput.style.transform = 'scale(1.05)';
                  setTimeout(() => quantityInput.style.transform = 'scale(1)', 150);
              }
          });

          increaseBtn.addEventListener('click', function() {
              let value = parseInt(quantityInput.value);
              if (value < 999) {
                  quantityInput.value = value + 1;
                  quantityInput.style.transform = 'scale(1.05)';
                  setTimeout(() => quantityInput.style.transform = 'scale(1)', 150);
              }
          });

          quantityInput.addEventListener('change', function() {
              let value = parseInt(this.value);
              if (isNaN(value) || value < 1) {
                  this.value = 1;
              } else if (value > 999) {
                  this.value = 999;
              }
          });
      }

      // ==================== ADD TO CART ====================
      const addToCartBtn = document.getElementById('addToCartBtn');
      let isAddingToCart = false;
      
      if (addToCartBtn) {
          addToCartBtn.addEventListener('click', function(e) {
              e.preventDefault();
              
              if (isAddingToCart) return;
              isAddingToCart = true;
              
              console.log('üõí Add to cart clicked');
              
              // Hi·ªáu ·ª©ng button
              this.classList.add('added');
              const originalText = this.innerHTML;
              this.innerHTML = '‚úì ADDED TO CART';
              
              // T·∫°o popup ch·ªâ M·ªòT l·∫ßn
              const existingPopup = document.querySelector('.added-cart-popup');
              if (existingPopup) {
                  existingPopup.remove();
              }
              
              const popup = document.createElement('div');
              popup.className = 'added-cart-popup active';
              popup.innerHTML = `
                  <div class="added-cart-wrapper">
                      <button class="added-cart-close">&times;</button>
                      <h2 class="added-cart-title">Added to Cart!</h2>
                      <p class="added-cart-product">Dior Forever Foundation</p>
                  </div>
              `;
              
              document.body.appendChild(popup);
              
              // Close button functionality
              const closeBtn = popup.querySelector('.added-cart-close');
              closeBtn.addEventListener('click', function() {
                  popup.classList.remove('active');
                  setTimeout(() => {
                      if (popup.parentNode) {
                          popup.remove();
                      }
                  }, 300);
              });
              
              // Close on overlay click
              popup.addEventListener('click', function(e) {
                  if (e.target === popup) {
                      popup.classList.remove('active');
                      setTimeout(() => {
                          if (popup.parentNode) {
                              popup.remove();
                          }
                      }, 300);
                  }
              });
              
              // Auto remove after 3 seconds
              setTimeout(() => {
                  addToCartBtn.classList.remove('added');
                  addToCartBtn.innerHTML = originalText;
                  isAddingToCart = false;
                  
                  if (popup && popup.classList.contains('active')) {
                      popup.classList.remove('active');
                      setTimeout(() => {
                          if (popup.parentNode) {
                              popup.remove();
                          }
                      }, 300);
                  }
              }, 3000);
          });
      }

      // ==================== GLOBAL FUNCTIONS ====================
      window.changeMainImage = function(src, thumb) {
          const mainImage = document.getElementById('main-image');
          if (mainImage) {
              mainImage.style.opacity = '0.5';
              setTimeout(() => {
                  mainImage.src = src;
                  mainImage.style.opacity = '1';
              }, 200);
              
              document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
              thumb.classList.add('active');
          }
      };

      window.changeQuantity = function(delta) {
          const qtyInput = document.getElementById('quantity');
          let newVal = parseInt(qtyInput.value) + delta;
          if (newVal >= 1) {
              qtyInput.value = newVal;
              qtyInput.style.transform = 'scale(1.05)';
              setTimeout(() => qtyInput.style.transform = 'scale(1)', 150);
          }
      };

      window.addToCart = function() {
          if (addToCartBtn) {
              addToCartBtn.click();
          }
      };

      console.log('‚úÖ Product page JavaScript initialized successfully');
    }
  </script>
</body>
</html>
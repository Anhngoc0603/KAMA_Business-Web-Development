/* KAMA Beauty Quiz - Fullscreen Modal */
:root {
  --bq-bg: rgba(20, 18, 19, 0.78);
  --bq-card: #fff;
  --bq-primary: #ff5b8f;
  --bq-primary-2: #ff8db0;
  --bq-text: #222;
  --bq-muted: #777;
  --bq-border: #eee;
  --bq-gold: #e8d8c4; /* soft gold for borders */
  --bq-blush: #f8eef3; /* blush-pink panel */
  --bq-soft-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.beauty-quiz-overlay {
  position: fixed;
  inset: 0;
  background: var(--bq-bg);
  backdrop-filter: blur(6px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 99999;
}
.beauty-quiz-overlay.active { display: flex; }

.bq-modal {
  width: min(980px, 96vw);
  height: min(720px, 92vh);
  background: var(--bq-card);
  border-radius: 20px;
  box-shadow: var(--bq-soft-shadow);
  display: grid;
  grid-template-rows: 68px auto 84px;
  overflow: hidden;
  font-family: Georgia, 'Times New Roman', serif;
  position: relative;
}
.bq-modal::after{
  /* subtle inner border */
  content:""; position:absolute; inset:0; border-radius:20px; pointer-events:none;
  box-shadow: inset 0 0 0 1px rgba(232,216,196,0.45);
}

.bq-header {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 22px;
  border-bottom: 1px solid rgba(232,216,196,0.35);
}
.bq-title {
  font-weight: 600;
  color: var(--bq-text);
  font-size: 30px;
  letter-spacing: 0.4px;
}
.bq-close {
  margin-left: auto;
  border: none;
  background: #fff;
  font-size: 18px;
  cursor: pointer;
  color: #7e6b5b;
  width: 32px; height: 32px; border-radius: 50%;
  box-shadow: 0 4px 10px rgba(0,0,0,0.12); border: 1px solid var(--bq-gold);
}
.bq-progress {
  position: relative;
  height: 8px;
  width: 100%;
  background: #f3eef3;
  border-radius: 999px;
  overflow: hidden;
  margin-top: 6px;
}
.bq-progress::before{
  content: "";
  position: absolute;
  left: -22px; top: 50%; transform: translateY(-50%);
  width: 18px; height: 18px; border-radius: 50%;
  box-shadow: inset 0 0 0 2px #e9c7d6, 0 0 10px rgba(233,199,214,0.6);
  background: radial-gradient(circle at 40% 40%, #ffdde9, #e9c7d6 70%);
}
.bq-progress > .bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--bq-primary), var(--bq-primary-2));
  transition: width 320ms ease;
}
.bq-progress-text { font-size: 13px; color: var(--bq-muted); text-align: center; margin-top: 8px; }

.bq-content {
  padding: 28px;
  overflow-y: auto;
  background: linear-gradient(180deg, rgba(246,240,245,0.5), rgba(255,255,255,0.7));
  position: relative;
}
.bq-content::before{
  /* soft sparkle field */
  content:""; position:absolute; inset:0; pointer-events:none; z-index:0;
  background:
    radial-gradient(6px 6px at 10% 22%, rgba(255,255,255,0.8), transparent 60%),
    radial-gradient(5px 5px at 76% 38%, rgba(255,255,255,0.7), transparent 60%),
    radial-gradient(4px 4px at 34% 78%, rgba(255,255,255,0.6), transparent 60%),
    radial-gradient(3px 3px at 52% 56%, rgba(255,255,255,0.6), transparent 60%);
  filter: blur(0.3px);
}
.bq-step {
  display: none;
}
.bq-step.active { display: block; }
.bq-question {
  font-size: 28px;
  font-weight: 600;
  margin-bottom: 18px;
  color: #f1e6e0;
  text-shadow: 0 1px 0 #c9b6a2, 0 2px 6px rgba(0,0,0,0.15);
}
.bq-subtext { color: var(--bq-muted); margin-bottom: 20px; }

.bq-options { display: grid; gap: 16px; }
.bq-options.grid-4 { grid-template-columns: repeat(4, 1fr); }
.bq-options.grid-3 { grid-template-columns: repeat(3, 1fr); }
.bq-options.grid-2 { grid-template-columns: repeat(2, 1fr); }

.bq-tone {
  display: flex; flex-direction: column; align-items: center; gap: 10px;
  padding: 12px; border: 1px dashed transparent; border-radius: 16px; cursor: pointer;
}
.bq-tone-dot {
  width: 60px; height: 60px; border-radius: 50%; border: 2px solid #ddd;
  box-shadow: inset 0 0 0 3px rgba(255,255,255,0.5);
}
.bq-tone.selected { border-color: var(--bq-primary); }
.bq-tone-label { font-size: 13px; color: var(--bq-text); }

.bq-icon-btn {
  display: flex; flex-direction: column; align-items: center; gap: 10px;
  padding: 18px; border-radius: 18px; border: 1px solid var(--bq-gold); cursor: pointer;
  background: var(--bq-blush);
  box-shadow: 0 6px 14px rgba(196, 120, 160, 0.18);
  transition: transform 140ms ease, box-shadow 160ms ease, border-color 160ms ease;
}
.bq-icon-btn:hover{ transform: translateY(-2px); box-shadow: 0 10px 20px rgba(196,120,160,0.22); }
.bq-icon-btn .icon {
  font-size: 28px; width: 56px; height: 56px; display: grid; place-items: center; border-radius: 14px;
  background: #fff2f6; color: var(--bq-primary);
}
.bq-icon-btn.selected { border-color: var(--bq-primary); background: #fff7fa; box-shadow: 0 12px 26px rgba(196, 120, 160, 0.25); }
.bq-icon-label { font-size: 14px; font-weight: 600; color: #6f5b5b; }

.bq-tag {
  display: inline-flex; align-items: center; gap: 8px; padding: 10px 12px; border-radius: 999px;
  border: 1px solid var(--bq-border); cursor: pointer; color: var(--bq-text); background: #fff;
}
.bq-tag.selected { border-color: var(--bq-primary); background: #fff7fa; color: var(--bq-primary); }
.bq-tag .check { width: 18px; height: 18px; border-radius: 50%; border: 1px solid var(--bq-border); display: inline-block; }
.bq-tag.selected .check { background: var(--bq-primary); border-color: var(--bq-primary); }

.bq-footer {
  display: flex; align-items: center; justify-content: space-between; gap: 12px;
  padding: 18px 22px; border-top: 1px solid var(--bq-border);
}
.bq-btn {
  border: none; border-radius: 999px; padding: 14px 22px; font-weight: 600; cursor: pointer;
  transition: transform 140ms ease, box-shadow 160ms ease, filter 140ms ease;
}
.bq-btn.primary { background: linear-gradient(180deg, #ffc8d8, #f5a5bb); color: #fff; box-shadow: 0 10px 24px rgba(196, 120, 160, 0.28); }
.bq-btn.primary:hover{ transform: translateY(-1px); filter: brightness(1.03); box-shadow: 0 14px 28px rgba(196,120,160,0.32); }
.bq-btn.secondary { background: #f6f6f9; color: var(--bq-text); }
.bq-btn[disabled] { opacity: 0.6; cursor: not-allowed; }

.bq-loading { display: grid; place-items: center; height: 100%; }
.bq-spinner { width: 48px; height: 48px; border-radius: 50%; border: 5px solid #ffd1df; border-top-color: var(--bq-primary); animation: spin 0.9s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

.bq-products {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 10px;
}
.bq-card {
  border: 1px solid var(--bq-border); border-radius: 16px; overflow: hidden; background: #fff;
}
.bq-card img { width: 100%; height: 160px; object-fit: cover; }
.bq-card .body { padding: 12px; }
.bq-card .title { font-size: 14px; font-weight: 600; }
.bq-card .meta { font-size: 12px; color: var(--bq-muted); }
.bq-card .actions { display: flex; gap: 8px; margin-top: 10px; }
.bq-cta { display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: 999px; border: 1px solid var(--bq-border); font-size: 12px; text-decoration: none; color: var(--bq-text); }
.bq-cta.primary { background: var(--bq-primary); color: #fff; border-color: transparent; }

/* CTA banner on homepage */
.bq-home-cta {
  display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 16px;
  margin: 16px auto; padding: 16px 20px; border-radius: 16px; max-width: 1100px;
  background: linear-gradient(90deg, #ffe4ed, #fff9f9);
  border: 1px solid #ffeef5;
}
.bq-home-cta .text { font-weight: 600; }
.bq-home-cta .sub { color: var(--bq-muted); font-size: 13px; }
.bq-home-cta .cta-btn { border: none; padding: 12px 18px; border-radius: 999px; background: var(--bq-primary); color: #fff; font-weight: 600; cursor: pointer; }

/* Full-width white banner section for quiz image */
.bq-banner-section {
  width: 100%;
  background: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px 0;
  margin: 32px 0; /* increased vertical spacing */
}
.bq-banner-container {
  width: min(92vw, 1160px);
  position: relative;
  isolation: isolate; /* ensure blend effects stay within container */
}
.bq-banner-img {
  display: block;
  width: 100%; /* scale to container width like sample */
  height: auto;
  max-width: 100%;
  cursor: pointer;
  border-radius: 12px;
  transition: transform 160ms ease, box-shadow 220ms ease, filter 160ms ease;
  will-change: transform, filter, box-shadow;
}

.bq-banner-img:hover,
.bq-banner-img:focus-visible {
  transform: translateY(-1px);
  filter: brightness(1.03) saturate(1.04);
  /* Muted pink with gray undertone, softer spread */
  box-shadow: 0 12px 26px rgba(196, 120, 160, 0.25),
              0 0 28px 14px rgba(120, 120, 140, 0.18);
  outline: none;
}

/* Edge-blend glow layer for smoother transition between image and shadow */
.bq-banner-container::after {
  content: "";
  position: absolute;
  inset: -12px; /* extends slightly beyond image edges */
  border-radius: 18px;
  pointer-events: none;
  /* radial gradient with muted pink + gray that softly fades out */
  background: radial-gradient(120% 90% at 50% 50%,
    rgba(196, 120, 160, 0.20) 0%,
    rgba(140, 140, 160, 0.16) 40%,
    rgba(140, 140, 160, 0.06) 70%,
    transparent 100%);
  filter: blur(8px);
  mix-blend-mode: multiply;
  opacity: 0;
  transition: opacity 220ms ease, filter 220ms ease, transform 200ms ease;
  will-change: opacity, filter, transform;
}

.bq-banner-container:hover::after,
.bq-banner-container:focus-within::after {
  opacity: 1;
  transform: scale(1.01);
}

/* Overlay CTA button centered near bottom of banner */
.bq-banner-cta {
  position: absolute;
  left: 50%;
  bottom: 18px; /* near bottom edge */
  transform: translateX(-50%);
  z-index: 2;
  padding: 10px 18px;
  border-radius: 999px;
  border: none;
  background: var(--bq-primary);
  color: #fff;
  font-weight: 600;
  letter-spacing: 0.2px;
  cursor: pointer;
  box-shadow: 0 6px 14px rgba(196, 120, 160, 0.24);
  transition: transform 160ms ease, box-shadow 200ms ease, filter 160ms ease, opacity 160ms ease;
}
.bq-banner-cta:hover,
.bq-banner-cta:focus-visible {
  transform: translateX(-50%) translateY(-1px);
  filter: brightness(1.05);
  box-shadow: 0 10px 20px rgba(196, 120, 160, 0.28);
  outline: none;
}

/* Framed popup inside banner */
.bq-framed-popup {
  position: absolute;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 3;
}
.bq-framed-popup.active { display: flex; }
.bq-frame {
  position: relative;
  width: min(92vw, 920px);
  /* Use actual image element to preserve intrinsic aspect ratio */
  --frame-pad-left: 8%;
  --frame-pad-right: 8%;
  --frame-pad-top: 9%;
  --frame-pad-bottom: 10%;
}
.bq-frame-img { display: block; width: 100%; height: auto; }
.bq-framed-host {
  position: absolute;
  left: var(--frame-pad-left);
  right: var(--frame-pad-right);
  top: var(--frame-pad-top);
  bottom: var(--frame-pad-bottom);
  display: flex; align-items: stretch; justify-content: center;
}
.bq-frame-close {
  position: absolute;
  right: 16px; top: 12px;
  z-index: 4;
  padding: 6px 10px; border-radius: 999px; border: none;
  background: rgba(0,0,0,0.2); color: #fff; cursor: pointer;
}

/* Modal adjustments for framed mode */
.bq-modal.framed {
  width: 100%; height: 100%;
  box-shadow: none; border: none; border-radius: 12px;
  background: rgba(255, 250, 252, 0.92);
}
.bq-modal.framed .bq-header { background: transparent; }
.bq-modal.framed .bq-footer { background: transparent; }
